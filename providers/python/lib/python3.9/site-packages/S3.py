import os
import boto3

def download_bot_images(folderName):
  imagesFolderPath = os.environ['IMAGES_FOLDER_PATH']

  client = boto3.client('s3')
  images = client.list_objects_v2(
    Bucket='chyr-twitter-bot-images',
    Prefix=f'jaguar/{folderName}/'
  )

  if images['KeyCount'] !=0:
    for image in images['Contents']:
      if image['Size'] != 0:
        imageKey = image['Key']
        size = image['Size']
        localFileName = f'{imagesFolderPath}/{size}.jpeg'
        with open(localFileName, 'wb') as data:
          client.download_fileobj('chyr-twitter-bot-images', imageKey, data)
    return 'images downloaded'
  else:
    return 'empty folder'
